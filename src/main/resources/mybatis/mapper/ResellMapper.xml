<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.mingle.mapper.ResellMapper">
	<select id="resell_totalRecord" resultType="int">
		select count(resell_no) from resell
		<where>
			<if test="searchWord1 != null and searchWord1 != ''">
				and resell_name like '%${searchWord1}%'
			</if>
			<if test="searchWord2 != null and searchWord2 != ''">
				and resell_name like '%${searchWord2}%'
			</if>
			<if test="searchWord3 != null and searchWord3 != ''">
				and resell_name like '%${searchWord3}%'
			</if>
		</where>
	</select>
	
	<select id="kream_totalRecord" resultType="int">
	 	select count(item_no) from item
	 	<where>
			<if test="searchWord1 != null and searchWord1 != ''">
				and item_name like '%${searchWord1}%'
			</if>
			<if test="searchWord2 != null and searchWord2 != ''">
				and item_name like '%${searchWord2}%'
			</if>
			<if test="searchWord3 != null and searchWord3 != ''">
				and item_name like '%${searchWord3}%'
			</if>
		</where>
	</select>
	
	<select id="resell_boardData" resultType="com.project.mingle.vo.ResellVO">
		select resell_no, resell_name, resell_seller, item_price, date_format(resell_writedate, '%Y-%m-%d %h:%i:%s') 
		resell_writedate from resell 
		<where>
			<if test="searchWord1 != null and searchWord1 != ''">
				and resell_name like '%${searchWord1}%'
			</if>
			<if test="searchWord2 != null and searchWord2 != ''">
				and resell_name like '%${searchWord2}%'
			</if>
			<if test="searchWord3 != null and searchWord3 != ''">
				and resell_name like '%${searchWord3}%'
			</if>
		</where>
		order by resell_writedate desc limit #{onePageRecord} offset ${offsetPoint};		
	</select>
	
	<select id="kreamData" resultType="com.project.mingle.vo.ResellVO">
	    select item_no, item_name, item_price, item_image, item_postdate from item
	    <where>
			<if test="searchWord1 != null and searchWord1 != ''">
				and item_name like '%${searchWord1}%'
			</if>
			<if test="searchWord2 != null and searchWord2 != ''">
				and item_name like '%${searchWord2}%'
			</if>
			<if test="searchWord3 != null and searchWord3 != ''">
				and item_name like '%${searchWord3}%'
			</if>
		</where>
	    order by item_name limit #{onePageRecord} offset ${offsetPoint};
	</select>
</mapper>