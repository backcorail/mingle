<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.mingle.mapper.RequestMapper">
	<insert id ="requestInsert" parameterType="com.project.mingle.vo.RequestVO" useGeneratedKeys="true" keyProperty="request_no">
	    insert into request(request_name, user_id, request_type, request_comment, request_writedate)
	    values(#{request_name}, #{user_id}, #{request_type}, #{request_comment}, #{request_writedate})
    </insert>
    <insert id="requestFileInsert" parameterType="java.util.List">
	    <if test="list != null or !list.isEmpty()">
		    <foreach item="item" collection="list" open="insert into request_datafile(request_no, request_datafile_dataname) values"
				separator=",">
				(${item.request_no}, #{item.request_datafile_dataname})
			</foreach>
	    </if>
	</insert>
	<select id="dataSelect" resultType="com.project.mingle.vo.RequestVO">
		select request_no, request_name, request_comment, user_id, request_writedate from request where no=${param1}
	</select>
</mapper>